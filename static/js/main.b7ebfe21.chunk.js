(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,a){e.exports=a(39)},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),o=a.n(l),i=(a(31),a(1)),s=a(2),c=a(4),u=a(3),m=a(5),p=(a(32),a(33),a(14)),h=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"layout"},r.a.createElement("a",{href:"#menu",id:"menuLink",className:"menu-link"},r.a.createElement("span",null)),r.a.createElement("div",{id:"menu"},r.a.createElement("div",{className:"pure-menu"},r.a.createElement("a",{className:"pure-menu-heading",href:"Company"},"Company"),r.a.createElement("ul",{className:"pure-menu-list"},r.a.createElement("li",{className:"pure-menu-item"},r.a.createElement(p.b,{to:"/",className:"pure-menu-link"},"Home")),r.a.createElement("li",{className:"pure-menu-item"},r.a.createElement(p.b,{to:"/autor",className:"pure-menu-link"},"Autor")),r.a.createElement("li",{className:"pure-menu-item"},r.a.createElement(p.b,{to:"/livro",className:"pure-menu-link"},"Livro"))))),r.a.createElement("div",{id:"main"},this.props.children))}}]),t}(r.a.Component),d=a(11),b=a(13),v=a.n(b),E=a(7),f=a.n(E),j=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={msgErro:""},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:this.props.id},this.props.label),r.a.createElement("input",this.props),r.a.createElement("span",{className:"error"},this.state.msgErro))}},{key:"componentDidMount",value:function(){f.a.subscribe("erro-validacao",function(e,t){""===this.props.value&&this.setState({msgErro:t.error})}.bind(this)),f.a.subscribe("limpa-erros",function(e){this.setState({msgErro:""})}.bind(this))}}]),t}(n.Component),O=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",null),r.a.createElement("button",{type:this.props.type,className:"pure-button pure-button-primary"},this.props.label))}}]),t}(n.Component),y=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"publicaErros",value:function(e){console.log(e),console.log(e.error),f.a.publish("erro-validacao",e)}},{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(n.Component),k=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={nome:"",email:"",senha:""},e.enviaForm=e.enviaForm.bind(Object(d.a)(e)),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"enviaForm",value:function(e){e.preventDefault(),v.a.ajax({url:"http://localhost:8080/spring-postegresql/api/autor/novo",contentType:"application/json",dataType:"json",type:"post",data:JSON.stringify({nome:this.state.nome,email:this.state.email,senha:this.state.senha}),success:function(e){f.a.publish("atualiza-lista-autores",e),this.setState({nome:"",email:"",senha:""})}.bind(this),error:function(e){500===e.status&&(new y).publicaErros(e.responseJSON),400===e.status&&(new y).publicaErros(e.responseJSON)},beforeSend:function(){f.a.publish("limpa-erros",{})}})}},{key:"salvaAlteracao",value:function(e,t){var a={};a[e]=t.target.value,this.setState(a)}},{key:"render",value:function(){return r.a.createElement("div",{className:"pure-form pure-form-aligned"},r.a.createElement("form",{className:"pure-form pure-form-aligned",onSubmit:this.enviaForm,method:"post"},r.a.createElement(j,{id:"nome",type:"text",name:"nome",value:this.state.nome,onChange:this.salvaAlteracao.bind(this,"nome"),label:"Nome"}),r.a.createElement(j,{id:"email",type:"email",name:"email",value:this.state.email,onChange:this.salvaAlteracao.bind(this,"email"),label:"E-mail"}),r.a.createElement(j,{id:"senha",type:"password",name:"senha",value:this.state.senha,onChange:this.salvaAlteracao.bind(this,"senha"),label:"Senha"}),r.a.createElement(O,{type:"submit",label:"Gravar"})))}}]),t}(n.Component),g=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("table",{className:"pure-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nome"),r.a.createElement("th",null,"email"))),r.a.createElement("tbody",null,this.props.lista.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.nome),r.a.createElement("td",null,e.email))}))))}}]),t}(n.Component),N=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={lista:[]},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){v.a.ajax({url:"http://localhost:8080/spring-postegresql/api/autores",dataType:"json",success:function(e){this.setState({lista:e})}.bind(this),error:function(e){console.log(e),console.log("erro")}}),f.a.subscribe("atualiza-lista-autores",function(e,t){this.setState({lista:t})}.bind(this))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Cadastro de Autores")),r.a.createElement("div",{className:"content",id:"content"},r.a.createElement(k,null),r.a.createElement(g,{lista:this.state.lista})))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={titulo:"",preco:"",autorId:""},a.setTitulo=a.setTitulo.bind(Object(d.a)(a)),a.setPreco=a.setPreco.bind(Object(d.a)(a)),a.setAutorId=a.setAutorId.bind(Object(d.a)(a)),a.handleLivroSubmit=a.handleLivroSubmit.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"setTitulo",value:function(e){this.setState({titulo:e.target.value})}},{key:"setPreco",value:function(e){this.setState({preco:e.target.value})}},{key:"setAutorId",value:function(e){this.setState({autorId:e.target.value})}},{key:"handleLivroSubmit",value:function(e){e.preventDefault();var t=this.state.titulo.trim(),a=this.state.preco.trim(),n=this.state.autorId;v.a.ajax({url:"http://cdc-react.herokuapp.com/api/livros",contentType:"application/json",dataType:"json",type:"POST",data:JSON.stringify({titulo:t,preco:a,autorId:n}),success:function(e){f.a.publish("atualiza-lista-livros",e),this.setState({titulo:"",preco:"",autorId:""})},error:function(e){400===e.status&&(new y).publicaErros(e.responseJSON)},beforeSend:function(){f.a.publish("limpa-erros",{})}}),this.setState({titulo:"",preco:"",autorId:""})}},{key:"render",value:function(){var e=this.props.autores.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.nome)});return r.a.createElement("div",{className:"autorForm"},r.a.createElement("form",{className:"pure-form pure-form-aligned",onSubmit:this.handleLivroSubmit},r.a.createElement(j,{id:"titulo",name:"titulo",label:"Titulo: ",type:"text",value:this.state.titulo,placeholder:"Titulo do livro",onChange:this.setTitulo}),r.a.createElement(j,{id:"preco",name:"preco",label:"Preco: ",type:"decimal",value:this.state.preco,placeholder:"Pre\xe7o do livro",onChange:this.setPreco}),r.a.createElement("div",{className:"pure-controls"},r.a.createElement("select",{value:this.state.autorId,name:"autorId",onChange:this.setAutorId},r.a.createElement("option",{value:""},"Selecione Autor"),e)),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",null),r.a.createElement("button",{type:"submit",className:"pure-button pure-button-primary"},"Gravar"))))}}]),t}(n.Component),C=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.lista.map(function(e){return r.a.createElement("tr",{key:e.titulo},r.a.createElement("td",null,e.titulo),r.a.createElement("td",null,e.autor.nome),r.a.createElement("td",null,e.preco))});return r.a.createElement("table",{className:"pure-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Titulo"),r.a.createElement("th",null,"Autor"),r.a.createElement("th",null,"Preco"))),r.a.createElement("tbody",null,e))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={lista:[],autores:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){v.a.ajax({url:"http://cdc-react.herokuapp.com/api/livros",dataType:"json",success:function(e){this.setState({lista:e})}.bind(this)}),v.a.ajax({url:"http://cdc-react.herokuapp.com/api/autores",dataType:"json",success:function(e){this.setState({autores:e})}.bind(this)}),f.a.subscribe("atualiza-lista-livros",function(e,t){this.setState({lista:t})}.bind(this))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Cadastro de Livros")),r.a.createElement("div",{className:"content",id:"content"},r.a.createElement(S,{autores:this.state.autores}),r.a.createElement(C,{lista:this.state.lista})))}}]),t}(n.Component),T=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Bem Vindo ao Sistema"))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=a(12);o.a.render(r.a.createElement(p.a,null,r.a.createElement(I.c,null,r.a.createElement(h,null,r.a.createElement(I.a,{exact:!0,path:"/",component:T}),r.a.createElement(I.a,{path:"/autor",component:N}),r.a.createElement(I.a,{path:"/livro",component:w})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,1,2]]]);
//# sourceMappingURL=main.b7ebfe21.chunk.js.map